import{r as l,u as N,s as R,a as H,l as O,g as I,b as Z,j as a,d as i,f as W,m as Y,S as $,c as U,e as Q,h as E,i as q,k as J,R as K}from"./index-8k6hM1_2.js";import{D as X,C as G,A as ee,p as V,a as ae,b as z,L as te,c as re,d as oe,P as ne,e as se,i as le}from"./index-CPSLwP1J.js";import{T as ie,a as F,b as B,c as ce}from"./TableRow-BUTq3yYM.js";const de={TOP_PLAYERS:"Top-5 players",OTHERS:"Others",NAME:"Nickname",DAMAGE:"Damage, Т",IMPACT:"Impact",BEST:"Best transformation",TOTAL:"Guild total",RATE:"Rate",NEW:"Newbies"},pe={TOP_PLAYERS:"Топ-5 гравців",OTHERS:"Решта",NAME:"Нік",DAMAGE:"Дамаг, Т",IMPACT:"Вклад",BEST:"Найкращий ріст",TOTAL:"Урон гільдії",RATE:"Рейтинг",NEW:"Новачки"},ge={TOP_PLAYERS:"Топ-5 игроков",OTHERS:"Остальные",NAME:"Ник",DAMAGE:"Урон, Т",IMPACT:"Вклад",BEST:"Лучший рост",TOTAL:"Урон гильдии",RATE:"Рейтинг",NEW:"Новички"},me={en:de,uk:pe,ru:ge},L=e=>me[e],ue=({title:e,titleId:t,...r},o)=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:o,"aria-labelledby":t,...r},e?l.createElement("title",{id:t},e):null,l.createElement("path",{d:"M6.25 18.75C5.86 18.36 5.86 17.74 6.25 17.35L17.625 6H10.5C10.086 6 9.75 5.664 9.75 5.25C9.75 4.836 10.086 4.5 10.5 4.5H19.5C19.7656 4.5 20.0196 4.60516 20.2071 4.79264C20.3946 4.98012 20.5 5.23413 20.5 5.5V14.5C20.5 14.914 20.164 15.25 19.75 15.25C19.336 15.25 19 14.914 19 14.5V7.0607L7.375 18.75C6.985 19.14 6.365 19.14 6.25 18.75Z"})),he=l.forwardRef(ue),xe=({title:e,titleId:t,...r},o)=>l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:o,"aria-labelledby":t,...r},e?l.createElement("title",{id:t},e):null,l.createElement("path",{d:"M6.25 6.25C5.86 6.64 5.86 7.26 6.25 7.65L17.625 19H10.5C10.086 19 9.75 19.336 9.75 19.75C9.75 20.164 10.086 20.5 10.5 20.5H19.5C19.7656 20.5 20.0196 20.3948 20.2071 20.2074C20.3946 20.0199 20.5 19.7659 20.5 19.5V12.5C20.5 12.086 20.164 11.75 19.75 11.75C19.336 11.75 19 12.086 19 12.5V17.0607L7.375 6.25C6.985 5.86 6.365 5.86 6.25 6.25Z"})),be=l.forwardRef(xe),Ce=()=>{var T,_;const{language:e}=N(R),t=H(),r=l.useMemo(()=>O.reduce((m,{name:v,info:j})=>{const[b,f]=j.slice(-2);if(!b||!f||b.damage===0)return m;const k=(f.damage-b.damage)/b.damage*100;return m.push({name:v,damageLastZvek:f.damage,damagePreviousZvek:b.damage,percentageChange:k}),m},[]).sort((m,v)=>v.percentageChange-m.percentageChange),[]),o=t==null?void 0:t[2],d=(o==null?void 0:o.percentageChange)??null,{rate:C=0,newbies:u=0}=((T=I)==null?void 0:T[2])||{},{rate:w=0}=((_=I)==null?void 0:_[1])||{},h=m=>m==null?null:m?a.jsx(he,{}):a.jsx(be,{}),{BEST:n}=L(e),{NO_DATA:s,GROW:c,GUILD_RATING:y,NEWBIES:p}=Z(e),x=d===null?s:`${d>0?"+":"-"}${Math.abs(d).toFixed(2)}%`,g=w-C,A=[{key:"total",value:a.jsx(M,{children:o!=null&&o.total?`${(o.total/1e12).toFixed(0)} T`:s}),isPositive:d!==null&&d>0,percent:d===0?"":x,icon:h(d!==null&&d>0),label:c},{key:"best",value:a.jsx(M,{children:r[0].name}),isPositive:r[0].percentageChange>0,percent:`+${r[0].percentageChange.toFixed(2)}%`,icon:h(r[0].percentageChange>0),label:n},{key:"rating",value:a.jsx(P,{value:g,children:C}),isPositive:g>0,percent:g===0?"":g>0?`(+${g})`:`(-${-g})`,icon:g===0?null:h(g>0),label:y},{key:"newbies",value:a.jsx(P,{value:u,children:u}),isPositive:u>0,percent:null,icon:u===0?null:h(u>0),label:p}];return a.jsx(Te,{children:A.map(({key:m,value:v,isPositive:j,percent:b,icon:f,label:k})=>a.jsxs(fe,{children:[v,b===null?a.jsx("div",{}):a.jsx(ye,{positive:j,children:b}),f===null?a.jsx("div",{}):a.jsx(ve,{positive:j,children:f}),a.jsx(we,{children:k})]},m))})},Te=i.div.withConfig({displayName:"Bars__Wrapper",componentId:"sc-97z2x5-0"})(["display:grid;grid-template-columns:repeat(4,1fr);grid-column-gap:1rem;@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),fe=i.div.withConfig({displayName:"Bars__Box",componentId:"sc-97z2x5-1"})(["display:grid;grid-template-columns:1fr auto auto;gap:0.3rem;padding:1rem 0.5rem 0.5rem 1rem;border-radius:6px;background-color:",";box-shadow:0 2px 1px -1px rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 1px 3px 0 rgba(0,0,0,0.12);"],({theme:e})=>e.colors.gray000),we=i.div.withConfig({displayName:"Bars__Text",componentId:"sc-97z2x5-2"})(["",";white-space:nowrap;"],Y),M=i.div.withConfig({displayName:"Bars__Value",componentId:"sc-97z2x5-3"})(["",";"],W),P=i.span.withConfig({displayName:"Bars__ChangeText",componentId:"sc-97z2x5-4"})(["",";color:",";"],W,({value:e,theme:{colors:{green100:t,red100:r,gray100:o}}})=>e===null?o:e>0?t:e<0?r:o),ye=i.div.withConfig({displayName:"Bars__Percent",componentId:"sc-97z2x5-5"})(["color:",";"],({positive:e,theme:{colors:{green100:t,red100:r}}})=>e?t:r),ve=i($).withConfig({displayName:"Bars__Icon",componentId:"sc-97z2x5-6"})(["&.MuiSvgIcon-root{width:1.4rem;height:1.4rem;padding:0.2rem;background-color:",";border-radius:3px;fill:",";}"],({positive:e})=>e?"rgba(68, 217, 38, 0.15)":"rgba(235, 72, 99, 0.15)",({positive:e,theme:{colors:{green100:t,red100:r}}})=>e?t:r),S=U(["background:",";border-radius:6px;box-shadow:0 2px 1px -1px rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 1px 3px 0 rgba(0,0,0,0.12);"],({theme:e})=>e.colors.gray000),_e=({title:e,titleId:t,...r},o)=>l.createElement("svg",{width:16,height:16,viewBox:"1 1 11 11",xmlns:"http://www.w3.org/2000/svg",ref:o,"aria-labelledby":t,...r},e?l.createElement("title",{id:t},e):null,l.createElement("path",{d:"M3.64645 11.3536C3.45118 11.1583 3.45118 10.8417 3.64645 10.6465L10.2929 4L6 4C5.72386 4 5.5 3.77614 5.5 3.5C5.5 3.22386 5.72386 3 6 3L11.5 3C11.6326 3 11.7598 3.05268 11.8536 3.14645C11.9473 3.24022 12 3.36739 12 3.5L12 9.00001C12 9.27615 11.7761 9.50001 11.5 9.50001C11.2239 9.50001 11 9.27615 11 9.00001V4.70711L4.35355 11.3536C4.15829 11.5488 3.84171 11.5488 3.64645 11.3536Z"})),D=l.forwardRef(_e);G.register(ee,V,ae,z);const je=()=>{const{language:e}=N(R),t=Q(),{NAME:r,TOTAL:o,DAMAGE:d,IMPACT:C,TOP_PLAYERS:u,OTHERS:w}=L(e),h=l.useMemo(()=>O.map(({name:p,info:x})=>({name:p,damage:x[x.length-1].damage,guildTotal:x[x.length-1].guildTotal})),[]),n=E(5)[2].guildTotal,s=E(5)[2].topDamagePercentage,c={labels:[u,w],datasets:[{data:[s*n,(100-s)*n],backgroundColor:["rgba(72, 99, 235, 0.7)","rgba(68, 217, 38, 0.7)"],hoverOffset:4}]},y=[r,d,C,""];return a.jsxs(Ee,{children:[a.jsxs(Ae,{children:[a.jsx(Ie,{children:a.jsx(X,{data:c,options:{responsive:!0,plugins:{datalabels:{display:!1}}}})}),a.jsxs(Ne,{children:[o,": ",(E(5)[2].guildTotal/1e12).toFixed(2)," T"]}),a.jsx(Re,{onClick:()=>t("/main"),children:a.jsx(D,{})})]}),a.jsx(ke,{children:a.jsxs(ie,{children:[a.jsx(F,{children:y.map(p=>a.jsx(B,{align:"center",children:a.jsx("b",{children:p})},p))}),a.jsx(ce,{children:E(5)[2].topPlayers.map((p,x)=>{const g=h.find(T=>T.name===p)||{damage:0,guildTotal:1},A=[p,(g.damage/1e12).toFixed(2),`${(g.damage/g.guildTotal*100).toFixed(2)}%`,a.jsx(D,{})];return a.jsx(Le,{onClick:()=>t(`/details/${p}`),children:A.map((T,_)=>a.jsx(B,{align:"center",children:T},_))},x)})})]})})]})},Ee=i.div.withConfig({displayName:"Tops__Wrapper",componentId:"sc-mjnndx-0"})(["display:grid;grid-gap:1rem;grid-template-columns:calc(35% - 0.5rem) calc(65% - 0.5rem);@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),Ae=i.div.withConfig({displayName:"Tops__ChartBlock",componentId:"sc-mjnndx-1"})(["",";position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;"],S),ke=i.div.withConfig({displayName:"Tops__TopsTable",componentId:"sc-mjnndx-2"})(["",";height:100%;display:flex;"],S),Ie=i.div.withConfig({displayName:"Tops__DoughnutWrapper",componentId:"sc-mjnndx-3"})(["width:300px;display:flex;justify-content:center;"]),Ne=i.div.withConfig({displayName:"Tops__Text",componentId:"sc-mjnndx-4"})(["",";margin-top:0.5rem;text-align:center;"],q),Re=i($).withConfig({displayName:"Tops__Icon",componentId:"sc-mjnndx-5"})(["&.MuiSvgIcon-root{cursor:pointer;position:absolute;top:1rem;right:1rem;}"]),Le=i(F).withConfig({displayName:"Tops__Row",componentId:"sc-mjnndx-6"})(["&.MuiTableRow-root{position:relative;cursor:pointer;&:hover{background-color:rgba(83,158,236,0.6);}}"]);G.register(re,oe,ne,se,z,V,le);const Se=()=>{const{language:e}=N(R),t=l.useMemo(()=>I.reduce((n,{date:s,total:c,rate:y,newbies:p})=>(n.labels.push(s),n.total.push(c),n.rate.push(y),n.newbies.push(p),n),{labels:[],total:[],rate:[],newbies:[]}),[]),r=l.useCallback((n,s)=>{if(!n)return s;const c=n.createLinearGradient(0,0,0,250);return c.addColorStop(0,s),c.addColorStop(1,"rgba(255, 255, 255, .4)"),c},[]),o=l.useCallback((n,s,c)=>({labels:t.labels,datasets:[{label:"value",data:s,borderColor:c,backgroundColor:r(n,c),tension:.3,fill:!0,pointBackgroundColor:c}]}),[t.labels,r]),d=n=>{const s="rgb(238 238 238)";return{scales:{x:{display:!0,grid:{color:s},border:{color:s}},y:{display:!0,grid:{color:s},border:{color:s}}},animation:{duration:2500,easing:"easeInOutQuart"},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:n},datalabels:{display:!1}}}},{TOTAL:C,RATE:u,NEW:w}=L(e),h=[{key:"total",color:"rgba(72, 99, 235, 0.7)",title:C},{key:"rate",color:"rgba(68, 217, 38, 0.7)",title:u},{key:"newbies",color:"rgba(235, 72, 99, 0.7)",title:w}];return a.jsx(Be,{children:h.map(({key:n,color:s,title:c})=>a.jsx(Me,{children:a.jsx(te,{data:o(document.createElement("canvas").getContext("2d"),t[n],s),options:d(c)})},n))})},Be=i.div.withConfig({displayName:"Charts__Wrapper",componentId:"sc-14fm1km-0"})(["display:grid;grid-template-columns:repeat(3,calc(33% - 0.5rem));grid-column-gap:1rem;@media ","{grid-template-columns:1fr;grid-row-gap:1rem;}"],({theme:e})=>e.breakpoints.maxTb),Me=i.div.withConfig({displayName:"Charts__Chart",componentId:"sc-14fm1km-1"})(["",";background:",";border-radius:12px;padding-left:0.5rem;align-items:center;display:flex;"],S,({theme:e})=>e.colors.gray000),$e=()=>{const e=J();return l.useEffect(()=>{K.send({hitType:"dashboard",page:e.pathname})},[]),a.jsxs(Pe,{children:[a.jsx(Ce,{}),a.jsx(je,{}),a.jsx(Se,{})]})},Pe=i.div.withConfig({displayName:"DashboardView__Wrapper",componentId:"sc-1lvsu5b-0"})(["height:100vh;padding:1rem 1rem 1.5rem;display:grid;grid-template-rows:calc(15% - 2rem) calc(58% - 2rem) auto;grid-row-gap:1rem;background-color:",";@media ","{height:100%;grid-template-rows:repeat(3,auto);}"],({theme:e})=>e.colors.gray000,({theme:e})=>e.breakpoints.maxTb);export{$e as default};
